<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xelar - Votre réseau social</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Configuration de la police Inter */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Masquer toutes les sections de page par défaut */
        .page-section {
            display: none;
        }
        /* Afficher la section active */
        .page-section.active {
            display: block;
        }
        /* Styles pour les icônes de navigation mobile */
        .nav-icon {
            font-size: 1.5rem; /* Taille de l'icône */
            margin-bottom: 0.25rem; /* Espacement sous l'icône */
        }

        /* Styles pour le mode sombre */
        body.dark-mode {
            background-color: #1a202c; /* bg-gray-900 */
            color: #e2e8f0; /* text-gray-200 */
        }
        body.dark-mode .bg-white {
            background-color: #2d3748; /* bg-gray-800 */
            color: #e2e8f0;
            /* Neon effect for main content blocks */
            box-shadow: 0 0 10px rgba(138, 43, 226, 0.7), 0 0 20px rgba(75, 0, 130, 0.5), 0 0 30px rgba(0, 0, 255, 0.3);
        }
        body.dark-mode .bg-gray-50 {
            background-color: #4a5568; /* bg-gray-700 */
            color: #e2e8f0;
        }
        body.dark-mode .shadow-md {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
        }
        body.dark-mode .border {
            border-color: #4a5568; /* gray-700 */
        }
        body.dark-mode .text-gray-700 {
            color: #cbd5e0; /* gray-300 */
        }
        body.dark-mode .text-gray-800 {
            color: #e2e8f0; /* gray-200 */
        }
        body.dark-mode .text-gray-900 {
            color: #f7fafc; /* gray-100 */
        }
        body.dark-mode .text-gray-500 {
            color: #a0aec0; /* gray-400 */
        }
        body.dark-mode .text-gray-600 {
            color: #a0aec0; /* gray-400 */
        }
        body.dark-mode .hover\:bg-blue-50:hover {
            background-color: #2c5282; /* blue-800 */
        }
        body.dark-mode .bg-blue-100 {
            background-color: #2b6cb0; /* blue-700 */
        }
        body.dark-mode input, body.dark-mode textarea {
            background-color: #2d3748; /* gray-800 */
            border-color: #4a5568; /* gray-700 */
            color: #e2e8f0;
        }
        body.dark-mode input::placeholder, body.dark-mode textarea::placeholder {
            color: #a0aec0; /* gray-400 */
        }
        body.dark-mode .bg-gray-200 {
            background-color: #4a5568; /* gray-700 */
            color: #e2e8f0;
        }
        body.dark-mode .file\:bg-blue-50 {
            background-color: #2c5282; /* blue-800 */
        }
        body.dark-mode .file\:text-blue-700 {
            color: #90cdf4; /* blue-300 */
        }
        body.dark-mode .hover\:file\:bg-blue-100:hover {
            background-color: #3182ce; /* blue-600 */
        }
        body.dark-mode .bg-gray-800 {
            background-color: #1a202c; /* gray-900 */
        }
        body.dark-mode .text-gray-400 {
            color: #718096; /* gray-600 */
        }
        body.dark-mode .hover\:text-white:hover {
            color: #f7fafc; /* white */
        }

        /* Neon effect for titles in dark mode */
        body.dark-mode h1, body.dark-mode h2 {
            text-shadow: 0 0 8px #8a2be2, 0 0 15px #4b0082, 0 0 20px #0000ff;
        }

        /* Neon effect for buttons in dark mode */
        body.dark-mode .bg-blue-500, body.dark-mode .bg-red-500, body.dark-mode .bg-green-500, body.dark-mode #dark-mode-toggle {
            box-shadow: 0 0 8px rgba(138, 43, 226, 0.7), 0 0 15px rgba(75, 0, 130, 0.5), 0 0 30px rgba(0, 0, 255, 0.3);
        }

        /* Custom scrollbar for webkit browsers */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }

        /* Styles for multi-step form steps */
        .signup-step {
            display: none;
        }
        .signup-step.active {
            display: block;
        }

        /* Share Modal Overlay */
        .share-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .share-modal-content {
            background: white;
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        body.dark-mode .share-modal-content {
            background-color: #2d3748; /* bg-gray-800 */
            color: #e2e8f0;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col md:flex-row">

    <!-- Barre latérale de navigation pour PC (visible sur md et plus) -->
    <aside class="fixed left-0 top-0 h-full w-64 bg-white shadow-lg p-4 hidden md:flex flex-col z-20">
        <div class="flex items-center justify-center mb-8">
            <h1 class="text-4xl font-bold text-blue-600 rounded-lg p-2">Xelar</h1>
        </div>
        <nav class="flex flex-col space-y-4 flex-grow">
            <a href="#accueil" class="nav-link flex items-center space-x-3 text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 p-3 rounded-lg hover:bg-blue-50" data-page="accueil">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m0 0l-7 7m7-7v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
                <span>Accueil</span>
            </a>
            <a href="#chat" class="nav-link flex items-center space-x-3 text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 p-3 rounded-lg hover:bg-blue-50" data-page="chat">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
                </svg>
                <span>Chat</span>
            </a>
            <a href="#messages" class="nav-link flex items-center space-x-3 text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 p-3 rounded-lg hover:bg-blue-50" data-page="messages">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
                </svg>
                <span>Messages</span>
            </a>
            <a href="#profile" class="nav-link flex items-center space-x-3 text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 p-3 rounded-lg hover:bg-blue-50" data-page="profile">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
                <span>Profil</span>
            </a>
            <a href="#creer-publier" class="nav-link flex items-center space-x-3 text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 p-3 rounded-lg hover:bg-blue-50" data-page="creer-publier">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span>Créer/Publier</span>
            </a>
            <a href="#friends-list" class="nav-link flex items-center space-x-3 text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 p-3 rounded-lg hover:bg-blue-50" data-page="friends-list">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h2a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2h2m3-10h4m-4 0v4m-2 0h6m-6 4h.01M16 20v-2a2 2 0 00-2-2H6a2 2 0 00-2 2v2h12z" />
                </svg>
                <span>Amis</span>
            </a>
            <!-- Lien vers la page Admin (visible seulement pour l'admin simulé) -->
            <a href="#admin-page" class="nav-link flex items-center space-x-3 text-gray-700 hover:text-blue-600 font-medium transition-colors duration-200 p-3 rounded-lg hover:bg-blue-50" data-page="admin-page" id="admin-nav-link">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
                <span>Admin</span>
            </a>
        </nav>
        <div class="mt-auto space-y-2">
            <a href="#login" class="nav-link flex items-center justify-center bg-blue-500 text-white px-4 py-2 rounded-full hover:bg-blue-600 transition-colors duration-200" data-page="login">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1" />
                </svg>
                <span>Se connecter</span>
            </a>
            <a href="#logout" class="nav-link flex items-center justify-center bg-red-500 text-white px-4 py-2 rounded-full hover:bg-red-600 transition-colors duration-200" data-page="logout">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                </svg>
                <span>Se déconnecter</span>
            </a>
        </div>
    </aside>

    <!-- En-tête pour mobile (visible sur md et moins) -->
    <header class="bg-white shadow-md p-4 flex justify-between items-center sticky top-0 z-10 md:hidden">
        <h1 class="text-3xl font-bold text-blue-600 rounded-lg p-2">Xelar</h1>
        <!-- Icône de recherche pour mobile -->
        <button id="mobile-search-button" class="text-gray-700 p-2 rounded-full hover:bg-gray-100">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
        </button>
    </header>

    <!-- Contenu principal de l'application -->
    <main class="flex-grow container mx-auto p-4 md:p-8 md:ml-64 pb-20 md:pb-8"> <!-- Ajout de padding-bottom pour la barre de nav mobile -->

        <!-- Section Recherche (initiallement masquée) -->
        <section id="search-results" class="page-section bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-3xl font-semibold text-gray-800 mb-4">Résultats de recherche</h2>
            <div class="mb-4">
                <input type="text" id="search-input" placeholder="Rechercher sur Xelar..." class="w-full p-3 rounded-lg bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-400">
            </div>
            <div id="search-output" class="space-y-4">
                <!-- Les résultats de recherche seront affichés ici -->
                <p class="text-gray-600">Tapez votre recherche ci-dessus pour trouver des personnes ou des publications.</p>
                <!-- Exemple de résultat de personne -->
                <div class="flex items-center p-3 bg-gray-50 rounded-lg shadow-sm hover:bg-gray-100 cursor-pointer search-person-result" data-friend-name="Personne Recherchée 1">
                    <img src="https://placehold.co/40x40/FF7F50/FFFFFF?text=P1" alt="Photo de profil" class="w-10 h-10 rounded-full mr-3">
                    <div>
                        <p class="font-bold text-gray-900">Personne Recherchée 1</p>
                        <p class="text-sm text-gray-600">@personne1</p>
                    </div>
                </div>
                <!-- Exemple de résultat de publication -->
                <div class="bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200 search-post-result" data-post-id="search-example-post-1">
                    <div class="flex items-center mb-3">
                        <img src="https://placehold.co/40x40/87CEEB/FFFFFF?text=P2" alt="Photo de profil" class="w-10 h-10 rounded-full mr-3">
                        <div>
                            <p class="font-bold text-gray-900">Nom d'utilisateur de la publication</p>
                            <p class="text-sm text-gray-500">Il y a 1 jour</p>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-4">Ceci est une publication trouvée via la recherche. #Recherche #Xelar</p>
                </div>
            </div>
        </section>

        <!-- Section Accueil -->
        <section id="accueil" class="page-section active bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-3xl font-semibold text-gray-800 mb-4">Fil d'actualité</h2>

            <!-- Section Statuts d'utilisateur (Stories) -->
            <div class="mb-8 p-4 bg-gray-50 rounded-lg shadow-sm overflow-x-auto whitespace-nowrap scrollbar-hide">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Statuts</h3>
                <div class="flex space-x-4 pb-2">
                    <!-- Votre statut -->
                    <div class="flex-none w-24 text-center status-profile-link cursor-pointer" data-friend-name="Votre Profil">
                        <div class="relative w-20 h-20 mx-auto mb-1 rounded-full border-2 border-blue-500 flex items-center justify-center bg-blue-100">
                            <img id="accueil-user-status-pic" src="https://placehold.co/60x60/6A5ACD/FFFFFF?text=Vous" alt="Votre statut" class="w-16 h-16 rounded-full object-cover border-2 border-white">
                            <div class="absolute bottom-0 right-0 bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-lg font-bold border-2 border-white">+</div>
                        </div>
                        <p id="accueil-user-status-text" class="text-sm text-gray-700 truncate">Votre statut</p>
                    </div>
                    <!-- Exemple de statut 1 -->
                    <div class="flex-none w-24 text-center status-profile-link cursor-pointer" data-friend-name="Ami Alpha">
                        <div class="w-20 h-20 mx-auto mb-1 rounded-full border-2 border-pink-500 flex items-center justify-center p-1">
                            <img src="CEEF508C-7A57-4A8D-90F7-5FB62BBB8A74.jpeg" alt="Statut utilisateur 1" class="w-16 h-16 rounded-full object-cover border-2 border-white">
                        </div>
                        <p class="text-sm text-gray-700 truncate">kuny137</p>
                    </div>
                    <!-- Exemple de statut 2 -->
                    <div class="flex-none w-24 text-center status-profile-link cursor-pointer" data-friend-name="Bêta Ami">
                        <div class="w-20 h-20 mx-auto mb-1 rounded-full border-2 border-green-500 flex items-center justify-center p-1">
                            <img src="018303D9-6499-496E-B817-6043544409DA.jpeg" alt="Statut utilisateur 2" class="w-16 h-16 rounded-full object-cover border-2 border-white">
                        </div>
                        <p class="text-sm text-gray-700 truncate">Bright</p>
                    </div>
                    <!-- Exemple de statut 3 -->
                    <div class="flex-none w-24 text-center status-profile-link cursor-pointer" data-friend-name="Gamma Pal">
                        <div class="w-20 h-20 mx-auto mb-1 rounded-full border-2 border-purple-500 flex items-center justify-center p-1">
                            <img src="qwertyuiop.png" alt="Statut utilisateur 3" class="w-16 h-16 rounded-full object-cover border-2 border-white">
                        </div>
                        <p class="text-sm text-gray-700 truncate">GS L'incandescent</p>
                    </div>
                    <!-- Exemple de statut 4 -->
                    <div class="flex-none w-24 text-center status-profile-link cursor-pointer" data-friend-name="Delta Friend">
                        <div class="w-20 h-20 mx-auto mb-1 rounded-full border-2 border-red-500 flex items-center justify-center p-1">
                            <img src="https://placehold.co/60x60/ADFF2F/000000?text=U4" alt="Statut utilisateur 4" class="w-16 h-16 rounded-full object-cover border-2 border-white">
                        </div>
                        <p class="text-sm text-gray-700 truncate">Delta Friend</p>
                    </div>
                    <!-- Exemple de statut 5 -->
                    <div class="flex-none w-24 text-center status-profile-link cursor-pointer" data-friend-name="Epsilon Buddy">
                        <div class="w-20 h-20 mx-auto mb-1 rounded-full border-2 border-orange-500 flex items-center justify-center p-1">
                            <img src="https://placehold.co/60x60/FF6347/FFFFFF?text=U5" alt="Statut utilisateur 5" class="w-16 h-16 rounded-full object-cover border-2 border-white">
                        </div>
                        <p class="text-sm text-gray-700 truncate">Epsilon Buddy</p>
                    </div>
                </div>
            </div>

            <div id="posts-container" class="space-y-6">
                <!-- Les nouvelles publications seront insérées ici en premier -->

                <!-- Exemple de publication -->
                <div class="post-item bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200">
                    <div class="flex items-center mb-3">
                        <img src="https://placehold.co/40x40/FF7F50/FFFFFF?text=U1" alt="Photo de profil" class="w-10 h-10 rounded-full mr-3">
                        <div>
                            <a href="#friend-profile" class="friend-profile-link font-bold text-gray-900 hover:text-blue-600" data-friend-name="Nom d'utilisateur 1">Nom d'utilisateur 1</a>
                            <p class="text-sm text-gray-500">Il y a 2 heures</p>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-4">Ceci est un exemple de publication sur Xelar. J'espère que vous aimez la nouvelle interface ! #Xelar #Nouveau</p>
                    <img src="https://placehold.co/600x300/ADD8E6/000000?text=Image+de+publication" alt="Image de publication" class="rounded-lg mb-3 w-full h-auto object-cover">
                    <div class="flex justify-between text-gray-600 text-sm mb-4">
                        <span class="likes-count">120 J'aime</span>
                        <span>30 Commentaires</span>
                        <span>5 Partages</span>
                    </div>
                    <div class="flex space-x-4 border-t border-gray-200 pt-3">
                        <button class="flex items-center space-x-1 text-gray-600 hover:text-blue-600 like-button">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 22l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                            </svg>
                            <span>J'aime</span>
                        </button>
                        <button class="flex items-center space-x-1 text-gray-600 hover:text-blue-600 comment-toggle-button">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                            </svg>
                            <span>Commenter</span>
                        </button>
                        <button class="flex items-center space-x-1 text-gray-600 hover:text-blue-600 share-button">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8.684 13.342C8.882 13.07 9.283 13 9.683 13h4.634c.4 0 .79.07 1.18.342m-2.548-4.548l-5.582 5.582c-1.21 1.21-1.503 2.67-1.161 3.498a3.178 3.178 0 00.677 1.018 4.678 4.678 0 001.018.677c.828.342 2.288.049 3.498-1.161l5.582-5.582m0 0a5.578 5.578 0 01-1.018-.677 3.178 3.178 0 00-.677-1.018c-.342-.828-.049-2.288 1.161-3.498l5.582-5.582m0 0a5.578 5.578 0 01.677-1.018 3.178 3.178 0 001.018-.677c.342.828.049 2.288-1.161 3.498l5.582 5.582m0 0a5.578 5.578 0 011.018.677 3.178 3.178 0 00.677 1.018c.342.828.049 2.288-1.161 3.498l-5.582 5.582" />
                            </svg>
                            <span>Partager</span>
                        </button>
                    </div>
                    <div class="comments-display-area mt-4 space-y-2">
                        <!-- Existing comments can be loaded here -->
                        <div class="bg-gray-100 p-2 rounded-lg text-sm">
                            <span class="font-semibold">Ami Alpha:</span> Super !
                        </div>
                    </div>
                    <div class="comment-input-area mt-4 hidden">
                        <textarea class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 resize-y comment-textarea" placeholder="Écrire un commentaire..."></textarea>
                        <button class="bg-blue-500 text-white px-4 py-2 rounded-full mt-2 hover:bg-blue-600 post-comment-button">Poster le commentaire</button>
                    </div>
                </div>
                <!-- Autre exemple de publication -->
                <div class="post-item bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200">
                    <div class="flex items-center mb-3">
                        <img src="https://placehold.co/40x40/87CEEB/FFFFFF?text=U2" alt="Photo de profil" class="w-10 h-10 rounded-full mr-3">
                        <div>
                            <a href="#friend-profile" class="friend-profile-link font-bold text-gray-900 hover:text-blue-600" data-friend-name="Nom d'utilisateur 2">Nom d'utilisateur 2</a>
                            <p class="text-sm text-gray-500">Hier</p>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-4">Explorer de nouvelles idées est toujours passionnant ! Qu'en pensez-vous ?</p>
                    <div class="flex justify-between text-gray-600 text-sm mb-4">
                        <span class="likes-count">80 J'aime</span>
                        <span>15 Commentaires</span>
                        <span>2 Partages</span>
                    </div>
                    <div class="flex space-x-4 border-t border-gray-200 pt-3">
                        <button class="flex items-center space-x-1 text-gray-600 hover:text-blue-600 like-button">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 22l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                            </svg>
                            <span>J'aime</span>
                        </button>
                        <button class="flex items-center space-x-1 text-gray-600 hover:text-blue-600 comment-toggle-button">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                            </svg>
                            <span>Commenter</span>
                        </button>
                        <button class="flex items-center space-x-1 text-gray-600 hover:text-blue-600 share-button">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8.684 13.342C8.882 13.07 9.283 13 9.683 13h4.634c.4 0 .79.07 1.18.342m-2.548-4.548l-5.582 5.582c-1.21 1.21-1.503 2.67-1.161 3.498a3.178 3.178 0 00.677 1.018 4.678 4.678 0 001.018.677c.828.342 2.288.049 3.498-1.161l5.582-5.582m0 0a5.578 5.578 0 01-1.018-.677 3.178 3.178 0 00-.677-1.018c-.342-.828-.049-2.288 1.161-3.498l5.582-5.582m0 0a5.578 5.578 0 01.677-1.018 3.178 3.178 0 001.018-.677c.342.828.049 2.288-1.161 3.498l5.582 5.582m0 0a5.578 5.578 0 011.018.677 3.178 3.178 0 00.677 1.018c.342.828.049 2.288-1.161 3.498l-5.582 5.582" />
                            </svg>
                            <span>Partager</span>
                        </button>
                    </div>
                    <div class="comments-display-area mt-4 space-y-2">
                        <!-- Existing comments can be loaded here -->
                    </div>
                    <div class="comment-input-area mt-4 hidden">
                        <textarea class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 resize-y comment-textarea" placeholder="Écrire un commentaire..."></textarea>
                        <button class="bg-blue-500 text-white px-4 py-2 rounded-full mt-2 hover:bg-blue-600 post-comment-button">Poster le commentaire</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Chat -->
        <section id="chat" class="page-section bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-3xl font-semibold text-gray-800 mb-4" id="chat-header">Chat en direct</h2>
            <div class="flex flex-col md:flex-row h-96 border rounded-lg overflow-hidden">
                <!-- Liste des contacts de chat -->
                <div class="w-full md:w-1/3 bg-gray-50 border-r p-4 overflow-y-auto">
                    <h3 class="font-bold text-lg mb-4">Contacts</h3>
                    <ul class="space-y-2" id="chat-contact-list">
                        <!-- User's own profile in chat contacts -->
                        <li class="chat-contact p-2 hover:bg-blue-50 rounded-lg cursor-pointer flex items-center" data-friend-name="Votre Profil">
                            <img id="chat-user-profile-pic" src="https://placehold.co/30x30/6A5ACD/FFFFFF?text=Vous" alt="Avatar" class="w-8 h-8 rounded-full mr-2">
                            <span id="chat-user-profile-name" class="font-medium">Votre Profil</span>
                        </li>
                        <li class="chat-contact p-2 hover:bg-blue-50 rounded-lg cursor-pointer flex items-center" data-friend-name="Ami A">
                            <img src="https://placehold.co/30x30/FFD700/000000?text=A" alt="Avatar" class="w-8 h-8 rounded-full mr-2">
                            <span class="font-medium">Ami A</span>
                        </li>
                        <li class="chat-contact p-2 bg-blue-100 rounded-lg cursor-pointer flex items-center" data-friend-name="Ami B">
                            <img src="https://placehold.co/30x30/ADFF2F/000000?text=B" alt="Avatar" class="w-8 h-8 rounded-full mr-2">
                            <span class="font-medium">Ami B</span>
                        </li>
                        <li class="chat-contact p-2 hover:bg-blue-50 rounded-lg cursor-pointer flex items-center" data-friend-name="Ami C">
                            <img src="https://placehold.co/30x30/FF6347/FFFFFF?text=C" alt="Avatar" class="w-8 h-8 rounded-full mr-2">
                            <span class="font-medium">Ami C</span>
                        </li>
                    </ul>
                </div>
                <!-- Zone de conversation -->
                <div class="flex-grow flex flex-col p-4">
                    <div class="flex-grow overflow-y-auto mb-4 border p-3 rounded-lg bg-white" id="chat-messages">
                        <!-- Exemple de message -->
                        <div class="flex justify-start mb-2">
                            <div class="bg-gray-200 p-3 rounded-xl max-w-xs">Salut ! Comment ça va ?</div>
                        </div>
                        <div class="flex justify-end mb-2">
                            <div class="bg-blue-500 text-white p-3 rounded-xl max-w-xs">Ça va super, merci ! Et toi ?</div>
                        </div>
                        <div class="flex justify-start mb-2">
                            <div class="bg-gray-200 p-3 rounded-xl max-w-xs">Bien aussi, je travaille sur un nouveau projet.</div>
                        </div>
                    </div>
                    <!-- Champ de saisie de message -->
                    <div class="flex">
                        <input type="text" placeholder="Écrire un message..." class="flex-grow p-3 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-400">
                        <button class="bg-blue-500 text-white px-6 py-3 rounded-r-lg hover:bg-blue-600 transition-colors duration-200">Envoyer</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Messages (Boîte de réception) -->
        <section id="messages" class="page-section bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-3xl font-semibold text-gray-800 mb-4">Boîte de réception</h2>
            <div class="space-y-4">
                <!-- Exemple de conversation cliquable -->
                <div class="message-conversation flex items-center p-3 bg-gray-50 rounded-lg shadow-sm hover:bg-gray-100 cursor-pointer transition-colors duration-200" data-friend-name="Nom de l'expéditeur 1">
                    <img src="https://placehold.co/50x50/FFC0CB/000000?text=D" alt="Avatar" class="w-12 h-12 rounded-full mr-4">
                    <div>
                        <p class="font-bold text-gray-900">Nom de l'expéditeur 1</p>
                        <p class="text-gray-700 text-sm">Dernier message : "Rendez-vous demain à 10h."</p>
                        <p class="text-gray-500 text-xs">Il y a 5 minutes</p>
                    </div>
                </div>
                <div class="message-conversation flex items-center p-3 bg-white rounded-lg shadow-sm hover:bg-gray-100 cursor-pointer transition-colors duration-200" data-friend-name="Nom de l'expéditeur 2">
                    <img src="https://placehold.co/50x50/90EE90/000000?text=E" alt="Avatar" class="w-12 h-12 rounded-full mr-4">
                    <div>
                        <p class="font-bold text-gray-900">Nom de l'expéditeur 2</p>
                        <p class="text-gray-700 text-sm">Dernier message : "Ok, je te tiens au courant."</p>
                        <p class="text-gray-500 text-xs">Il y a 1 heure</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Profil de l'utilisateur -->
        <section id="profile" class="page-section bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-3xl font-semibold text-gray-800 mb-4">Mon Profil</h2>
            <div class="flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-8">
                <div class="flex-shrink-0">
                    <img id="my-profile-pic" src="https://placehold.co/150x150/6A5ACD/FFFFFF?text=Votre+Profil" alt="Votre photo de profil" class="w-36 h-36 rounded-full border-4 border-blue-400 shadow-md">
                </div>
                <div class="text-center md:text-left">
                    <h3 class="text-4xl font-bold text-gray-900 mb-2" id="my-profile-name">Votre Nom d'Utilisateur</h3>
                    <p class="text-xl text-gray-600 mb-3" id="my-profile-bio">Développeur web | Passionné de technologie</p>
                    <p class="text-gray-700 leading-relaxed max-w-2xl">
                        Bienvenue sur mon profil Xelar ! J'aime explorer de nouvelles technologies, coder et partager mes expériences.
                        N'hésitez pas à me contacter ou à consulter mes publications.
                    </p>
                    <div class="mt-4 flex justify-center md:justify-start space-x-4">
                        <button id="edit-profile-button" class="bg-blue-500 text-white px-5 py-2 rounded-full hover:bg-blue-600 transition-colors duration-200">Modifier le profil</button>
                        <button class="bg-gray-200 text-gray-800 px-5 py-2 rounded-full hover:bg-gray-300 transition-colors duration-200">Paramètres</button>
                        <button id="dark-mode-toggle" class="bg-gray-700 text-white px-5 py-2 rounded-full hover:bg-gray-900 transition-colors duration-200">Mode Sombre</button>
                    </div>
                </div>
            </div>

            <div class="mt-8">
                <h3 class="text-2xl font-semibold text-gray-800 mb-4">Vos publications</h3>
                <div class="space-y-6">
                    <!-- Exemple de publication sur le profil -->
                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200">
                        <p class="text-gray-700 mb-4">Je viens de terminer un super projet ! Très fier du résultat.</p>
                        <div class="flex justify-between text-gray-600 text-sm">
                            <span>50 J'aime</span>
                            <span>10 Commentaires</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Modifier le profil -->
        <section id="edit-profile" class="page-section bg-white rounded-lg shadow-lg p-6 mb-8 max-w-md mx-auto">
            <h2 class="text-3xl font-semibold text-gray-800 mb-6">Modifier mon profil</h2>
            <form id="edit-profile-form" class="space-y-4">
                <div>
                    <label for="edit-name" class="block text-left text-gray-700 text-sm font-bold mb-2">Nom d'utilisateur</label>
                    <input type="text" id="edit-name" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" value="Votre Nom d'Utilisateur">
                </div>
                <div>
                    <label for="edit-bio" class="block text-left text-gray-700 text-sm font-bold mb-2">Bio</label>
                    <textarea id="edit-bio" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400 resize-y min-h-[100px]">Développeur web | Passionné de technologie</textarea>
                </div>
                <div>
                    <label for="edit-profile-pic-input" class="block text-left text-gray-700 text-sm font-bold mb-2">Changer la photo de profil</label>
                    <input type="file" id="edit-profile-pic-input" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" accept="image/*">
                    <img id="edit-profile-pic-preview" src="https://placehold.co/150x150/6A5ACD/FFFFFF?text=Votre+Profil" alt="Aperçu photo de profil" class="mt-4 w-24 h-24 rounded-full object-cover border-2 border-blue-400 mx-auto">
                </div>
                <button type="submit" class="bg-blue-500 text-white px-6 py-3 rounded-full hover:bg-blue-600 transition-colors duration-200 shadow-md w-full">Enregistrer les modifications</button>
                <button type="button" id="cancel-edit-profile" class="bg-gray-200 text-gray-800 px-6 py-3 rounded-full hover:bg-gray-300 transition-colors duration-200 shadow-md w-full mt-2">Annuler</button>
            </form>
        </section>

        <!-- Section Profil d'ami (exemple) -->
        <section id="friend-profile" class="page-section bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-3xl font-semibold text-gray-800 mb-4" id="friend-profile-header">Profil d'un ami</h2>
            <div class="flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-8">
                <div class="flex-shrink-0">
                    <img src="https://placehold.co/150x150/FFB6C1/000000?text=Ami+Profil" alt="Photo de profil de l'ami" class="w-36 h-36 rounded-full border-4 border-pink-400 shadow-md">
                </div>
                <div class="text-center md:text-left">
                    <h3 class="text-4xl font-bold text-gray-900 mb-2" id="friend-name-display">Nom de l'ami</h3>
                    <p class="text-xl text-gray-600 mb-3">Artiste | Amoureux de la nature</p>
                    <p class="text-gray-700 leading-relaxed max-w-2xl">
                        Salut ! Je suis un artiste passionné par la création et l'exploration du monde.
                        J'aime partager mes œuvres et discuter de nouvelles idées.
                    </p>
                    <div class="mt-4 flex justify-center md:justify-start space-x-4">
                        <button id="send-message-friend-profile" class="bg-green-500 text-white px-5 py-2 rounded-full hover:bg-green-600 transition-colors duration-200">Envoyer un message</button>
                        <button id="view-friends-button" class="bg-gray-200 text-gray-800 px-5 py-2 rounded-full hover:bg-gray-300 transition-colors duration-200">Amis</button>
                        <button id="add-friend-button" class="bg-blue-500 text-white px-5 py-2 rounded-full hover:bg-blue-600 transition-colors duration-200">Ajouter en ami</button>
                    </div>
                </div>
            </div>

            <div class="mt-8">
                <h3 class="text-2xl font-semibold text-gray-800 mb-4">Publications de l'ami</h3>
                <div class="space-y-6">
                    <!-- Exemple de publication sur le profil d'ami -->
                    <div class="bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200">
                        <p class="text-gray-700 mb-4">Nouvelle peinture terminée ! Qu'en pensez-vous ?</p>
                        <img src="https://placehold.co/600x300/F0E68C/000000?text=Oeuvre+d'art" alt="Oeuvre d'art" class="rounded-lg mb-3 w-full h-auto object-cover">
                        <div class="flex justify-between text-gray-600 text-sm">
                            <span>75 J'aime</span>
                            <span>12 Commentaires</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Liste d'amis -->
        <section id="friends-list" class="page-section bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-3xl font-semibold text-gray-800 mb-4">Mes Amis</h2>
            <div class="space-y-4">
                <!-- Exemple d'ami -->
                <div class="flex items-center p-3 bg-gray-50 rounded-lg shadow-sm hover:bg-gray-100 cursor-pointer friend-list-item" data-friend-name="Ami Alpha">
                    <img src="https://placehold.co/50x50/FF7F50/FFFFFF?text=A1" alt="Photo de profil" class="w-12 h-12 rounded-full mr-4">
                    <div>
                        <p class="font-bold text-gray-900">Ami Alpha</p>
                        <p class="text-sm text-gray-600">En ligne</p>
                    </div>
                </div>
                <div class="flex items-center p-3 bg-gray-50 rounded-lg shadow-sm hover:bg-gray-100 cursor-pointer friend-list-item" data-friend-name="Bêta Ami">
                    <img src="https://placehold.co/50x50/87CEEB/FFFFFF?text=B1" alt="Photo de profil" class="w-12 h-12 rounded-full mr-4">
                    <div>
                        <p class="font-bold text-gray-900">Bêta Ami</p>
                        <p class="text-sm text-gray-600">Il y a 30 min</p>
                    </div>
                </div>
                <div class="flex items-center p-3 bg-gray-50 rounded-lg shadow-sm hover:bg-gray-100 cursor-pointer friend-list-item" data-friend-name="Gamma Pal">
                    <img src="https://placehold.co/50x50/FFD700/000000?text=G1" alt="Photo de profil" class="w-12 h-12 rounded-full mr-4">
                    <div>
                        <p class="font-bold text-gray-900">Gamma Pal</p>
                        <p class="text-sm text-gray-600">Hors ligne</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Créer et Publier -->
        <section id="creer-publier" class="page-section bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-3xl font-semibold text-gray-800 mb-4">Créer une nouvelle publication</h2>
            <div class="space-y-4">
                <textarea id="new-post-textarea" class="w-full p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 resize-y min-h-[150px]" placeholder="Quoi de neuf sur Xelar ?"></textarea>
                <input type="file" id="new-post-image-input" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" accept="image/*">
                <button id="publish-button" class="bg-blue-500 text-white px-6 py-3 rounded-full hover:bg-blue-600 transition-colors duration-200 shadow-md">Publier</button>
            </div>
        </section>

        <!-- Section Page de connexion -->
        <section id="login" class="page-section bg-white rounded-lg shadow-lg p-6 mb-8 max-w-md mx-auto text-center">
            <div class="mb-6">
                <img src="https://placehold.co/100x100/4F46E5/FFFFFF?text=Xelar+Logo" alt="Xelar Logo" class="mx-auto h-24 w-24 rounded-full mb-4">
                <h2 class="text-3xl font-semibold text-gray-800">Connexion à Xelar</h2>
            </div>
            <form class="space-y-4">
                <div>
                    <label for="email" class="block text-left text-gray-700 text-sm font-bold mb-2">Adresse email</label>
                    <input type="email" id="email" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="votre@email.com">
                </div>
                <div>
                    <label for="password" class="block text-left text-gray-700 text-sm font-bold mb-2">Mot de passe</label>
                    <input type="password" id="password" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 mb-3 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="********">
                </div>
                <button type="submit" class="bg-blue-500 text-white px-6 py-3 rounded-full hover:bg-blue-600 transition-colors duration-200 shadow-md w-full">Se connecter</button>
                <p class="text-sm text-gray-600 mt-4">Pas encore de compte ? <a href="#signup" class="nav-link text-blue-600 hover:underline" data-page="signup">S'inscrire</a></p>
            </form>
        </section>

        <!-- Section Créer un nouveau compte (Inscription) -->
        <section id="signup" class="page-section bg-white rounded-lg shadow-lg p-6 mb-8 max-w-md mx-auto">
            <h2 class="text-3xl font-semibold text-gray-800 mb-6">Créer un nouveau compte</h2>

            <!-- Étape 1: Nom et Mot de passe -->
            <div id="signup-step-1" class="signup-step active space-y-4">
                <div>
                    <label for="signup-name" class="block text-left text-gray-700 text-sm font-bold mb-2">Nom d'utilisateur</label>
                    <input type="text" id="signup-name" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="Votre nom d'utilisateur">
                </div>
                <div>
                    <label for="signup-password" class="block text-left text-gray-700 text-sm font-bold mb-2">Mot de passe</label>
                    <input type="password" id="signup-password" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="Minimum 6 caractères">
                </div>
                <div>
                    <label for="signup-confirm-password" class="block text-left text-gray-700 text-sm font-bold mb-2">Confirmer le mot de passe</label>
                    <input type="password" id="signup-confirm-password" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="Confirmez votre mot de passe">
                </div>
                <button type="button" id="signup-next-1" class="bg-blue-500 text-white px-6 py-3 rounded-full hover:bg-blue-600 transition-colors duration-200 shadow-md w-full">Suivant</button>
            </div>

            <!-- Étape 2: Date de naissance, Lieu, Numéro de téléphone et Genre -->
            <div id="signup-step-2" class="signup-step space-y-4">
                <div>
                    <label for="signup-dob" class="block text-left text-gray-700 text-sm font-bold mb-2">Date de naissance</label>
                    <input type="date" id="signup-dob" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400">
                    <p id="age-error" class="text-red-500 text-xs italic mt-1 hidden">Vous devez avoir au moins 15 ans pour vous inscrire.</p>
                </div>
                <div>
                    <label for="signup-location" class="block text-left text-gray-700 text-sm font-bold mb-2">Lieu (Ville, Pays)</label>
                    <input type="text" id="signup-location" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="Ex: Kinshasa, RDC">
                </div>
                <div>
                    <label for="signup-phone" class="block text-left text-gray-700 text-sm font-bold mb-2">Numéro de téléphone</label>
                    <div class="flex">
                        <span class="inline-flex items-center px-3 rounded-l-lg border border-r-0 border-gray-300 bg-gray-200 text-gray-700 text-sm">
                            +243
                        </span>
                        <input type="tel" id="signup-phone" class="shadow appearance-none border rounded-r-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="976593482">
                    </div>
                </div>
                <div>
                    <label class="block text-left text-gray-700 text-sm font-bold mb-2">Genre</label>
                    <div class="flex items-center space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="signup-gender" value="male" class="form-radio text-blue-600">
                            <span class="ml-2 text-gray-700">Homme</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="signup-gender" value="female" class="form-radio text-pink-600">
                            <span class="ml-2 text-gray-700">Femme</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="signup-gender" value="other" class="form-radio text-purple-600">
                            <span class="ml-2 text-gray-700">Autre</span>
                        </label>
                    </div>
                </div>
                <div class="flex justify-between space-x-4">
                    <button type="button" id="signup-prev-2" class="bg-gray-200 text-gray-800 px-6 py-3 rounded-full hover:bg-gray-300 transition-colors duration-200 shadow-md w-1/2">Précédent</button>
                    <button type="button" id="signup-next-2" class="bg-blue-500 text-white px-6 py-3 rounded-full hover:bg-blue-600 transition-colors duration-200 shadow-md w-1/2">Suivant</button>
                </div>
            </div>

            <!-- Étape 3: Photo de profil -->
            <div id="signup-step-3" class="signup-step space-y-4 text-center">
                <p class="text-gray-700 text-lg mb-4">Ajoutez une photo de profil pour personnaliser votre compte !</p>
                <div class="relative w-32 h-32 mx-auto mb-4 rounded-full border-4 border-blue-400 flex items-center justify-center overflow-hidden">
                    <img id="profile-pic-preview" src="https://placehold.co/120x120/CCCCCC/FFFFFF?text=Photo" alt="Aperçu photo de profil" class="w-full h-full object-cover">
                    <label for="signup-profile-pic" class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 text-white text-sm cursor-pointer opacity-0 hover:opacity-100 transition-opacity duration-200 rounded-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    </label>
                </div>
                <input type="file" id="signup-profile-pic" class="hidden" accept="image/*">
                <div class="flex justify-between space-x-4">
                    <button type="button" id="signup-prev-3" class="bg-gray-200 text-gray-800 px-6 py-3 rounded-full hover:bg-gray-300 transition-colors duration-200 shadow-md w-1/2">Précédent</button>
                    <button type="submit" id="signup-submit" class="bg-blue-500 text-white px-6 py-3 rounded-full hover:bg-blue-600 transition-colors duration-200 shadow-md w-1/2">Terminer l'inscription</button>
                </div>
            </div>
        </section>

        <!-- Section Page de déconnexion -->
        <section id="logout" class="page-section bg-white rounded-lg shadow-lg p-6 mb-8 max-w-md mx-auto text-center">
            <div class="mb-6">
                <img src="https://placehold.co/100x100/4F46E5/FFFFFF?text=Xelar+Logo" alt="Xelar Logo" class="mx-auto h-24 w-24 rounded-full mb-4">
                <h2 class="text-3xl font-semibold text-gray-800">Déconnexion</h2>
            </div>
            <p class="text-lg text-gray-700 mb-6">Êtes-vous sûr de vouloir vous déconnecter de Xelar ?</p>
            <button class="bg-red-500 text-white px-6 py-3 rounded-full hover:bg-red-600 transition-colors duration-200 shadow-md">Confirmer la déconnexion</button>
        </section>

        <!-- Section Admin Page -->
        <section id="admin-page" class="page-section bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-3xl font-semibold text-gray-800 mb-4">Tableau de bord Admin (Simulation)</h2>

            <div id="admin-login-area" class="space-y-4 max-w-md mx-auto">
                <p class="text-gray-700 text-lg">Connectez-vous en tant qu'administrateur pour accéder au tableau de bord.</p>
                <div>
                    <label for="admin-username" class="block text-left text-gray-700 text-sm font-bold mb-2">Nom d'utilisateur Admin</label>
                    <input type="text" id="admin-username" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="admin ou kuny137">
                </div>
                <div>
                    <label for="admin-password" class="block text-left text-gray-700 text-sm font-bold mb-2">Mot de passe Admin</label>
                    <input type="password" id="admin-password" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="password ou knkn123">
                </div>
                <button id="admin-login-button" class="bg-blue-500 text-white px-6 py-3 rounded-full hover:bg-blue-600 transition-colors duration-200 shadow-md w-full">Connexion Admin</button>
                <p id="admin-login-message" class="text-red-500 text-sm text-center hidden">Nom d'utilisateur ou mot de passe incorrect.</p>
            </div>

            <div id="admin-dashboard-area" class="hidden mt-8">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-blue-50 p-4 rounded-lg shadow-sm text-center">
                        <p class="text-4xl font-bold text-blue-800" id="total-users-count">0</p>
                        <p class="text-blue-600">Utilisateurs inscrits</p>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg shadow-sm text-center">
                        <p class="text-4xl font-bold text-green-800" id="total-posts-count">0</p>
                        <p class="text-green-600">Publications totales</p>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-lg shadow-sm text-center">
                        <p class="text-4xl font-bold text-purple-800" id="connected-users-count">0</p>
                        <p class="text-purple-600">Utilisateurs connectés (simulé)</p>
                    </div>
                </div>

                <h3 class="text-2xl font-semibold text-gray-800 mb-4">Gestion des utilisateurs</h3>
                <div id="admin-user-list" class="space-y-3 mb-8">
                    <!-- User list will be dynamically loaded here -->
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg shadow-sm">
                        <div class="flex items-center">
                            <img src="https://placehold.co/40x40/FF7F50/FFFFFF?text=U" alt="User Avatar" class="w-10 h-10 rounded-full mr-3">
                            <div>
                                <p class="font-bold text-gray-900">Utilisateur Alpha</p>
                                <p class="text-sm text-gray-600">Statut: Actif</p>
                            </div>
                        </div>
                        <button class="bg-red-500 text-white px-3 py-1 rounded-full text-sm hover:bg-red-600">Supprimer</button>
                    </div>
                </div>

                <h3 class="text-2xl font-semibold text-gray-800 mb-4">Gestion des publications</h3>
                <div id="admin-post-list" class="space-y-3">
                    <!-- Post list will be dynamically loaded here -->
                    <div class="p-3 bg-gray-50 rounded-lg shadow-sm">
                        <p class="font-bold text-gray-900 mb-1">Publication par Utilisateur Bêta</p>
                        <p class="text-sm text-gray-700 truncate">Ceci est un exemple de publication...</p>
                        <div class="flex justify-between text-xs text-gray-500 mt-2">
                            <span>Likes: 15</span>
                            <span>Commentaires: 3</span>
                            <button class="bg-red-500 text-white px-2 py-0.5 rounded-full text-xs hover:bg-red-600">Supprimer</button>
                        </div>
                    </div>
                </div>

                <button id="admin-logout-button" class="bg-red-500 text-white px-6 py-3 rounded-full hover:bg-red-600 transition-colors duration-200 shadow-md w-full mt-8">Déconnexion Admin</button>
            </div>
        </section>

    </main>

    <!-- Barre de navigation mobile (visible sur md et moins) -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white shadow-lg p-2 flex justify-around items-center md:hidden z-50">
        <a href="#accueil" class="nav-link flex flex-col items-center text-gray-700 hover:text-blue-600 p-2 rounded-lg transition-colors duration-200" data-page="accueil">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m0 0l-7 7m7-7v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
            </svg>
            <span class="text-xs">Accueil</span>
        </a>
        <a href="#chat" class="nav-link flex flex-col items-center text-gray-700 hover:text-blue-600 p-2 rounded-lg transition-colors duration-200" data-page="chat">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
            </svg>
            <span class="text-xs">Chat</span>
        </a>
        <a href="#creer-publier" class="nav-link flex flex-col items-center text-blue-600 bg-blue-50 p-2 rounded-lg transition-colors duration-200 hover:bg-blue-100" data-page="creer-publier">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span class="text-xs">Créer</span>
        </a>
        <a href="#messages" class="nav-link flex flex-col items-center text-gray-700 hover:text-blue-600 p-2 rounded-lg transition-colors duration-200" data-page="messages">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
            </svg>
            <span class="text-xs">Messages</span>
        </a>
        <a href="#profile" class="nav-link flex flex-col items-center text-gray-700 hover:text-blue-600 p-2 rounded-lg transition-colors duration-200" data-page="profile">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
            </svg>
            <span class="text-xs">Profil</span>
        </a>
        <a href="#friends-list" class="nav-link flex flex-col items-center text-gray-700 hover:text-blue-600 p-2 rounded-lg transition-colors duration-200" data-page="friends-list">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h2a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2h2m3-10h4m-4 0v4m-2 0h6m-6 4h.01M16 20v-2a2 2 0 00-2-2H6a2 2 0 00-2 2v2h12z" />
            </svg>
            <span class="text-xs">Amis</span>
        </a>
        <!-- Lien vers la page Admin (mobile) -->
        <a href="#admin-page" class="nav-link flex flex-col items-center text-gray-700 hover:text-blue-600 p-2 rounded-lg transition-colors duration-200" data-page="admin-page" id="admin-nav-link-mobile">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 nav-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
            </svg>
            <span class="text-xs">Admin</span>
        </a>
    </nav>

    <!-- Pied de page -->
    <footer class="bg-gray-800 text-white p-6 text-center mt-auto rounded-t-lg md:ml-64">
        <p>&copy; 2024 Xelar. Tous droits réservés.</p>
        <div class="flex justify-center space-x-4 mt-2">
            <a href="#" class="text-gray-400 hover:text-white transition-colors duration-200">À propos</a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors duration-200">Confidentialité</a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors duration-200">Conditions</a>
        </div>
    </footer>

    <!-- Share Modal (Hidden by default) -->
    <div id="share-modal" class="share-modal-overlay hidden">
        <div class="share-modal-content">
            <h3 class="text-2xl font-semibold text-gray-800 mb-4">Partager la publication avec...</h3>
            <div id="friend-list-for-share" class="space-y-2 mb-4">
                <!-- Friends will be dynamically loaded here -->
                <div class="flex items-center">
                    <input type="checkbox" id="share-friend-1" class="mr-2">
                    <label for="share-friend-1" class="text-gray-700">Ami Alpha</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="share-friend-2" class="mr-2">
                    <label for="share-friend-2" class="text-gray-700">Bêta Ami</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="share-friend-3" class="mr-2">
                    <label for="share-friend-3" class="text-gray-700">Gamma Pal</label>
                </div>
            </div>
            <div class="flex justify-end space-x-4">
                <button id="cancel-share-button" class="bg-gray-300 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-400">Annuler</button>
                <button id="confirm-share-button" class="bg-blue-500 text-white px-4 py-2 rounded-full hover:bg-blue-600">Partager</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const body = document.body;
            const navLinks = document.querySelectorAll('.nav-link');
            const pageSections = document.querySelectorAll('.page-section');
            const chatHeader = document.getElementById('chat-header');
            const friendProfileHeader = document.getElementById('friend-profile-header');
            const friendNameDisplay = document.getElementById('friend-name-display');
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const mobileSearchButton = document.getElementById('mobile-search-button');
            const searchInput = document.getElementById('search-input');
            const searchOutput = document.getElementById('search-output');
            const chatMessages = document.getElementById('chat-messages');

            // Elements for profile editing
            const editProfileButton = document.getElementById('edit-profile-button');
            const cancelEditProfileButton = document.getElementById('cancel-edit-profile');
            const editProfileForm = document.getElementById('edit-profile-form');
            const editProfilePicInput = document.getElementById('edit-profile-pic-input');
            const editProfilePicPreview = document.getElementById('edit-profile-pic-preview');

            // Elements for main profile display
            const myProfilePic = document.getElementById('my-profile-pic');
            const myProfileName = document.getElementById('my-profile-name');
            const myProfileBio = document.getElementById('my-profile-bio');
            const editNameInput = document.getElementById('edit-name');
            const editBioInput = document.getElementById('edit-bio');

            // Elements for Accueil page (Your Status)
            const accueilUserStatusPic = document.getElementById('accueil-user-status-pic');
            const accueilUserStatusText = document.getElementById('accueil-user-status-text');

            // Elements for Chat page (Your Profile in contacts)
            const chatUserProfilePic = document.getElementById('chat-user-profile-pic');
            const chatUserProfileName = document.getElementById('chat-user-profile-name');


            // Elements for multi-step signup
            const signupSteps = document.querySelectorAll('.signup-step');
            const signupNext1 = document.getElementById('signup-next-1');
            const signupPrev2 = document.getElementById('signup-prev-2');
            const signupNext2 = document.getElementById('signup-next-2');
            const signupPrev3 = document.getElementById('signup-prev-3');
            const signupSubmit = document.getElementById('signup-submit');
            const signupDob = document.getElementById('signup-dob');
            const ageError = document.getElementById('age-error');
            const signupProfilePicInput = document.getElementById('signup-profile-pic');
            const profilePicPreview = document.getElementById('profile-pic-preview');
            const signupPhone = document.getElementById('signup-phone'); // New phone number input
            const signupGenderRadios = document.querySelectorAll('input[name="signup-gender"]'); // New gender radios


            // Elements for friend profile interactions
            const sendMessageFriendProfileButton = document.getElementById('send-message-friend-profile');
            const viewFriendsButton = document.getElementById('view-friends-button');
            const addFriendButton = document.getElementById('add-friend-button');

            // Elements for new post creation
            const newPostTextarea = document.getElementById('new-post-textarea');
            const newPostImageInput = document.getElementById('new-post-image-input');
            const publishButton = document.getElementById('publish-button');
            const postsContainer = document.getElementById('posts-container');

            // Share Modal Elements
            const shareModal = document.getElementById('share-modal');
            const cancelShareButton = document.getElementById('cancel-share-button');
            const confirmShareButton = document.getElementById('confirm-share-button');
            const friendListForShare = document.getElementById('friend-list-for-share');

            // Admin Page Elements
            const adminNavLink = document.getElementById('admin-nav-link');
            const adminNavLinkMobile = document.getElementById('admin-nav-link-mobile');
            const adminLoginArea = document.getElementById('admin-login-area');
            const adminDashboardArea = document.getElementById('admin-dashboard-area');
            const adminUsernameInput = document.getElementById('admin-username');
            const adminPasswordInput = document.getElementById('admin-password');
            const adminLoginButton = document.getElementById('admin-login-button');
            const adminLogoutButton = document.getElementById('admin-logout-button');
            const adminLoginMessage = document.getElementById('admin-login-message');
            const totalUsersCount = document.getElementById('total-users-count');
            const totalPostsCount = document.getElementById('total-posts-count');
            const connectedUsersCount = document.getElementById('connected-users-count');
            const adminUserList = document.getElementById('admin-user-list');
            const adminPostList = document.getElementById('admin-post-list');


            let currentSignupStep = 0;
            let isAdminLoggedIn = false; // Simulated admin login state

            // --- Global User Profile Data ---
            let userProfile = {
                name: "Votre Nom d'Utilisateur",
                bio: "Développeur web | Passionné de technologie",
                profilePic: "https://placehold.co/150x150/6A5ACD/FFFFFF?text=Votre+Profil",
                role: "user" // Default role
            };

            // Simulated user database (for admin page)
            let simulatedUsers = [
                { name: "Utilisateur Alpha", status: "Actif", avatar: "https://placehold.co/40x40/FF7F50/FFFFFF?text=U" },
                { name: "Utilisateur Bêta", status: "Inactif", avatar: "https://placehold.co/40x40/87CEEB/FFFFFF?text=U" },
                { name: "Utilisateur Gamma", status: "Actif", avatar: "https://placehold.co/40x40/FFD700/000000?text=U" }
            ];

            // Simulated posts data (for admin page, linked to actual posts)
            let simulatedPosts = []; // This will be populated from postsContainer


            // Load profile from localStorage if available
            const savedProfile = localStorage.getItem('xelarUserProfile');
            if (savedProfile) {
                userProfile = JSON.parse(savedProfile);
            }

            // Function to update all relevant UI elements with current userProfile data
            const updateUIWithUserProfile = () => {
                // Update Profile Page
                if (myProfilePic) myProfilePic.src = userProfile.profilePic;
                if (myProfileName) myProfileName.textContent = userProfile.name;
                if (myProfileBio) myProfileBio.textContent = userProfile.bio;

                // Update Accueil Page (Your Status)
                if (accueilUserStatusPic) {
                    const currentPicUrl = userProfile.profilePic;
                    if (currentPicUrl.includes('placehold.co')) {
                        accueilUserStatusPic.src = currentPicUrl.replace(/(\d+)x(\d+)/, '60x60');
                    } else {
                        accueilUserStatusPic.src = currentPicUrl;
                    }
                }
                if (accueilUserStatusText) accueilUserStatusText.textContent = userProfile.name;

                // Update Chat Page (Your Profile in contacts)
                if (chatUserProfilePic) {
                    const currentPicUrl = userProfile.profilePic;
                    if (currentPicUrl.includes('placehold.co')) {
                        chatUserProfilePic.src = currentPicUrl.replace(/(\d+)x(\d+)/, '30x30');
                    } else {
                        chatUserProfilePic.src = currentPicUrl;
                    }
                }
                if (chatUserProfileName) chatUserProfileName.textContent = userProfile.name;


                // Update Edit Profile form fields (when navigating to it)
                if (editNameInput) editNameInput.value = userProfile.name;
                if (editBioInput) editBioInput.value = userProfile.bio;
                if (editProfilePicPreview) editProfilePicPreview.src = userProfile.profilePic;
            };

            // Initial UI update on load
            updateUIWithUserProfile();

            // Function to generate HTML for a new post
            const generatePostHtml = (username, userPic, timeAgo, textContent, imageUrl = '', likes = 0, comments = 0, shares = 0) => {
                let imageHtml = '';
                if (imageUrl) {
                    imageHtml = `<img src="${imageUrl}" alt="Image de publication" class="rounded-lg mb-3 w-full h-auto object-cover">`;
                }
                return `
                    <div class="post-item bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200">
                        <div class="flex items-center mb-3">
                            <img src="${userPic}" alt="Photo de profil" class="w-10 h-10 rounded-full mr-3">
                            <div>
                                <a href="#friend-profile" class="friend-profile-link font-bold text-gray-900 hover:text-blue-600" data-friend-name="${username}">${username}</a>
                                <p class="text-sm text-gray-500">${timeAgo}</p>
                            </div>
                        </div>
                        <p class="text-gray-700 mb-4">${textContent}</p>
                        ${imageHtml}
                        <div class="flex justify-between text-gray-600 text-sm mb-4">
                            <span class="likes-count">${likes} J'aime</span>
                            <span>${comments} Commentaires</span>
                            <span>${shares} Partages</span>
                        </div>
                        <div class="flex space-x-4 border-t border-gray-200 pt-3">
                            <button class="flex items-center space-x-1 text-gray-600 hover:text-blue-600 like-button">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 22l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                            </svg>
                            <span>J'aime</span>
                        </button>
                        <button class="flex items-center space-x-1 text-gray-600 hover:text-blue-600 comment-toggle-button">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                            </svg>
                            <span>Commenter</span>
                        </button>
                        <button class="flex items-center space-x-1 text-gray-600 hover:text-blue-600 share-button">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8.684 13.342C8.882 13.07 9.283 13 9.683 13h4.634c.4 0 .79.07 1.18.342m-2.548-4.548l-5.582 5.582c-1.21 1.21-1.503 2.67-1.161 3.498a3.178 3.178 0 00.677 1.018 4.678 4.678 0 001.018.677c.828.342 2.288.049 3.498-1.161l5.582-5.582m0 0a5.578 5.578 0 01-1.018-.677 3.178 3.178 0 00-.677-1.018c-.342-.828-.049-2.288 1.161-3.498l5.582-5.582m0 0a5.578 5.578 0 01.677-1.018 3.178 3.178 0 001.018-.677c.342.828.049 2.288-1.161 3.498l5.582 5.582m0 0a5.578 5.578 0 011.018.677 3.178 3.178 0 00.677 1.018c.342.828.049 2.288-1.161 3.498l-5.582 5.582" />
                            </svg>
                            <span>Partager</span>
                        </button>
                    </div>
                    <div class="comments-display-area mt-4 space-y-2">
                        <!-- New comments will be appended here -->
                    </div>
                    <div class="comment-input-area mt-4 hidden">
                        <textarea class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 resize-y comment-textarea" placeholder="Écrire un commentaire..."></textarea>
                        <button class="bg-blue-500 text-white px-4 py-2 rounded-full mt-2 hover:bg-blue-600 post-comment-button">Poster le commentaire</button>
                    </div>
                </div>
                `;
            };


            // Fonction pour afficher la page demandée
            const showPage = (pageId, data = {}) => {
                pageSections.forEach(section => {
                    section.classList.remove('active'); // Masquer toutes les sections
                });
                const activeSection = document.getElementById(pageId);
                if (activeSection) {
                    activeSection.classList.add('active'); // Afficher la section active

                    // Mettre à jour le contenu spécifique à la page si des données sont fournies
                    if (pageId === 'chat' && data.friendName) {
                        chatHeader.textContent = `Chat avec ${data.friendName}`;
                        // Ici, vous pourriez charger les messages réels pour cet ami
                        // For now, clear and add a placeholder message
                        chatMessages.innerHTML = `<div class="flex justify-start mb-2"><div class="bg-gray-200 p-3 rounded-xl max-w-xs">Début de la conversation avec ${data.friendName}.</div></div>`;
                    } else if (pageId === 'friend-profile' && data.friendName) {
                        friendProfileHeader.textContent = `Profil de ${data.friendName}`;
                        friendNameDisplay.textContent = data.friendName;
                        // Ici, vous pourriez charger les données réelles du profil de l'ami
                    } else if (pageId === 'search-results') {
                        // Clear previous search results
                        searchOutput.innerHTML = `<p class="text-gray-600">Tapez votre recherche ci-dessus pour trouver des personnes ou des publications.</p>`;
                        searchInput.value = ''; // Clear search input when navigating to search page
                    } else if (pageId === 'signup') {
                        // Reset signup form to first step when navigating to it
                        currentSignupStep = 0;
                        showSignupStep(currentSignupStep);
                    } else if (pageId === 'edit-profile') {
                        // Initialize edit profile form with current profile data
                        editNameInput.value = userProfile.name;
                        editBioInput.value = userProfile.bio;
                        editProfilePicPreview.src = userProfile.profilePic;
                    } else if (pageId === 'admin-page') {
                        updateAdminDashboard();
                    }
                }
            };

            // Fonction pour afficher une étape spécifique du formulaire d'inscription
            const showSignupStep = (stepIndex) => {
                signupSteps.forEach((step, index) => {
                    if (index === stepIndex) {
                        step.classList.add('active');
                    } else {
                        step.classList.remove('active');
                    }
                });
            };

            // Gérer les clics sur les liens de navigation
            navLinks.forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault(); // Empêcher le rechargement de la page
                    const pageId = link.dataset.page; // Récupérer l'ID de la page à partir de l'attribut data-page

                    // Si la page est 'admin-page', vérifier la connexion admin
                    if (pageId === 'admin-page' && !isAdminLoggedIn) {
                        // Afficher la zone de connexion admin et masquer le tableau de bord
                        adminLoginArea.classList.remove('hidden');
                        adminDashboardArea.classList.add('hidden');
                        adminLoginMessage.classList.add('hidden'); // Hide previous error messages
                        adminUsernameInput.value = '';
                        adminPasswordInput.value = '';
                    }
                    showPage(pageId);

                    // Mettre à jour l'URL sans recharger la page (pour les signets)
                    history.pushState(null, '', `#${pageId}`);
                });
            });

            // Gérer les clics sur les conversations de messages pour ouvrir le chat
            document.querySelectorAll('.message-conversation').forEach(conversation => {
                conversation.addEventListener('click', (event) => {
                    event.preventDefault();
                    const friendName = conversation.dataset.friendName;
                    showPage('chat', { friendName: friendName });
                    history.pushState(null, '', `#chat`);
                });
            });

            // Gérer les clics sur les contacts de chat pour changer de conversation
            // Event delegation for dynamically added chat contacts
            document.getElementById('chat-contact-list').addEventListener('click', (event) => {
                const contact = event.target.closest('.chat-contact');
                if (contact) {
                    event.preventDefault();
                    const friendName = contact.dataset.friendName;
                    chatHeader.textContent = `Chat with ${friendName}`;
                    chatMessages.innerHTML = `<div class="flex justify-start mb-2"><div class="bg-gray-200 p-3 rounded-xl max-w-xs">Start of conversation with ${friendName}.</div></div>`;
                }
            });


            // Gérer les clics sur les noms d'utilisateur dans les publications pour ouvrir le profil d'ami
            document.querySelectorAll('.friend-profile-link').forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    const friendName = link.dataset.friendName;
                    showPage('friend-profile', { friendName: friendName });
                    history.pushState(null, '', `#friend-profile`);
                });
            });

            // Gérer les clics sur les statuts pour ouvrir le profil d'ami
            document.querySelectorAll('.status-profile-link').forEach(statusDiv => {
                statusDiv.addEventListener('click', (event) => {
                    event.preventDefault();
                    const friendName = statusDiv.dataset.friendName;
                    if (friendName === "Votre Profil") {
                        showPage('profile');
                        history.pushState(null, '', `#profile`);
                    } else {
                        showPage('friend-profile', { friendName: friendName });
                        history.pushState(null, '', `#friend-profile`);
                    }
                });
            });

            // Gérer le bouton de recherche mobile
            mobileSearchButton.addEventListener('click', () => {
                showPage('search-results');
                history.pushState(null, '', `#search-results`);
            });

            // Gérer la recherche (simulation)
            searchInput.addEventListener('input', () => {
                const query = searchInput.value.toLowerCase();
                let resultsHtml = '';
                if (query.length > 0) {
                    // Simulation de résultats de recherche
                    // Inclure les utilisateurs simulés dans la recherche
                    const filteredUsers = simulatedUsers.filter(user => user.name.toLowerCase().includes(query));
                    filteredUsers.forEach(user => {
                        resultsHtml += `
                            <div class="flex items-center p-3 bg-gray-50 rounded-lg shadow-sm hover:bg-gray-100 cursor-pointer search-person-result" data-friend-name="${user.name}">
                                <img src="${user.avatar}" alt="Photo de profil" class="w-10 h-10 rounded-full mr-3">
                                <div>
                                    <p class="font-bold text-gray-900">${user.name}</p>
                                    <p class="text-sm text-gray-600">@${user.name.toLowerCase().replace(/\s/g, '')}</p>
                                </div>
                            </div>
                        `;
                    });

                    // Inclure les publications simulées dans la recherche
                    const filteredPosts = simulatedPosts.filter(post => post.textContent.toLowerCase().includes(query) || post.username.toLowerCase().includes(query));
                    filteredPosts.forEach(post => {
                        resultsHtml += `
                            <div class="bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200 search-post-result" data-post-id="${post.id}">
                                <div class="flex items-center mb-3">
                                    <img src="${post.userPic}" alt="Photo de profil" class="w-10 h-10 rounded-full mr-3">
                                    <div>
                                        <p class="font-bold text-gray-900">${post.username}</p>
                                        <p class="text-sm text-gray-500">${post.timeAgo}</p>
                                    </div>
                                </div>
                                <p class="text-gray-700 mb-4">${post.textContent}</p>
                            </div>
                        `;
                    });


                    if (resultsHtml === '') {
                        resultsHtml = `<p class="text-gray-600">Aucun résultat trouvé pour "${query}".</p>`;
                    }
                } else {
                    resultsHtml = `<p class="text-gray-600">Tapez votre recherche ci-dessus pour trouver des personnes ou des publications.</p>`;
                }
                searchOutput.innerHTML = resultsHtml;
            });

            // Gérer les clics sur les résultats de recherche
            searchOutput.addEventListener('click', (event) => {
                const target = event.target;
                const personResult = target.closest('.search-person-result');
                const postResult = target.closest('.search-post-result');

                if (personResult) {
                    event.preventDefault();
                    const friendName = personResult.dataset.friendName;
                    showPage('friend-profile', { friendName: friendName });
                    history.pushState(null, '', `#friend-profile`);
                    console.log(`Naviguer vers le profil de: ${friendName}`);
                } else if (postResult) {
                    event.preventDefault();
                    const postId = postResult.dataset.postId; // Get the post ID if available
                    showPage('accueil'); // Navigate to the home page
                    history.pushState(null, '', `#accueil`);
                    // Dans une application réelle, vous feriez défiler ou mettez en évidence la publication spécifique en utilisant son ID.
                    console.log(`Naviguer vers la publication avec l'ID: ${postId} (simulation de défilement)`);
                }
            });

            // Gérer le bouton "Modifier le profil"
            editProfileButton.addEventListener('click', () => {
                showPage('edit-profile');
                history.pushState(null, '', `#edit-profile`);
            });

            // Gérer le bouton "Annuler" dans "Modifier le profil"
            cancelEditProfileButton.addEventListener('click', () => {
                showPage('profile'); // Retourne à la page de profil
                history.pushState(null, '', `#profile`);
            });

            // Gérer le changement de photo de profil dans la section d'édition
            editProfilePicInput.addEventListener('change', (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        editProfilePicPreview.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Gérer la soumission du formulaire "Modifier le profil"
            editProfileForm.addEventListener('submit', (event) => {
                event.preventDefault(); // Empêcher le rechargement de la page

                const newName = editNameInput.value;
                const newBio = editBioInput.value;
                const newProfilePicSrc = editProfilePicPreview.src; // This will be the base64 or new URL

                // Update global userProfile object
                userProfile.name = newName;
                userProfile.bio = newBio;
                userProfile.profilePic = newProfilePicSrc;

                // Save to localStorage
                localStorage.setItem('xelarUserProfile', JSON.stringify(userProfile));

                // Update all relevant UI elements
                updateUIWithUserProfile();

                console.log("Modifications du profil enregistrées !");
                showPage('profile'); // Retourne à la page de profil
                history.pushState(null, '', `#profile`);
            });


            // Logique du formulaire d'inscription en plusieurs étapes
            signupNext1.addEventListener('click', () => {
                // Validation de l'étape 1 (simulée)
                const name = document.getElementById('signup-name').value;
                const password = document.getElementById('signup-password').value;
                const confirmPassword = document.getElementById('signup-confirm-password').value;

                if (name.length < 3) {
                    console.error("Le nom d'utilisateur doit contenir au moins 3 caractères.");
                    alert("Erreur: Le nom d'utilisateur doit contenir au moins 3 caractères.");
                    return;
                }
                if (password.length < 6) {
                    console.error("Le mot de passe doit contenir au moins 6 caractères.");
                    alert("Erreur: Le mot de passe doit contenir au moins 6 caractères.");
                    return;
                }
                if (password !== confirmPassword) {
                    console.error("Les mots de passe ne correspondent pas.");
                    alert("Erreur: Les mots de passe ne correspondent pas.");
                    return;
                }

                currentSignupStep = 1;
                showSignupStep(currentSignupStep);
            });

            signupPrev2.addEventListener('click', () => {
                currentSignupStep = 0;
                showSignupStep(currentSignupStep);
            });

            signupNext2.addEventListener('click', () => {
                const dob = signupDob.value;
                if (!dob) {
                    ageError.textContent = "Veuillez entrer votre date de naissance.";
                    ageError.classList.remove('hidden');
                    alert("Erreur: Veuillez entrer votre date de naissance.");
                    return;
                }

                const birthDate = new Date(dob);
                const today = new Date();
                const age = today.getFullYear() - birthDate.getFullYear();
                const m = today.getMonth() - birthDate.getMonth();
                if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
                    age--;
                }

                if (age < 15) {
                    ageError.textContent = "Vous devez avoir au moins 15 ans pour vous inscrire.";
                    ageError.classList.remove('hidden');
                    alert("Erreur: Vous devez avoir au moins 15 ans pour vous inscrire.");
                    return;
                } else {
                    ageError.classList.add('hidden');
                }

                // Validation du lieu (simple)
                const location = document.getElementById('signup-location').value;
                if (location.length < 2) {
                    console.error("Veuillez entrer un lieu valide.");
                    alert("Erreur: Veuillez entrer un lieu valide.");
                    return;
                }

                // Validation du numéro de téléphone (simple)
                const phoneNumber = signupPhone.value.trim();
                // Vérifie que le numéro de téléphone contient au moins 7 chiffres (après le préfixe +243)
                if (phoneNumber.length < 7 || !/^\d+$/.test(phoneNumber)) {
                    console.error("Veuillez entrer un numéro de téléphone valide.");
                    alert("Erreur: Veuillez entrer un numéro de téléphone valide (au moins 7 chiffres après le préfixe).");
                    return;
                }

                // Validation du genre
                let selectedGender = null;
                for (const radio of signupGenderRadios) {
                    if (radio.checked) {
                        selectedGender = radio.value;
                        break;
                    }
                }
                if (!selectedGender) {
                    console.error("Veuillez sélectionner votre genre.");
                    alert("Erreur: Veuillez sélectionner votre genre.");
                    return;
                }


                currentSignupStep = 2;
                showSignupStep(currentSignupStep);
            });

            signupPrev3.addEventListener('click', () => {
                currentSignupStep = 1;
                showSignupStep(currentSignupStep);
            });

            signupProfilePicInput.addEventListener('change', (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        profilePicPreview.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            });

            signupSubmit.addEventListener('click', () => {
                // Dans une application réelle, ces données seraient envoyées à un serveur pour la création du compte.
                // Pour cette démonstration côté client, nous simulons la création et stockons les données localement.
                console.log("Tentative de soumission du formulaire d'inscription...");

                // Récupérer les données du formulaire
                const name = document.getElementById('signup-name').value;
                const password = document.getElementById('signup-password').value; // En réalité, ne pas stocker en clair!
                const dob = document.getElementById('signup-dob').value;
                const location = document.getElementById('signup-location').value;
                const phoneNumber = "+243" + signupPhone.value.trim();
                let selectedGender = null;
                for (const radio of signupGenderRadios) {
                    if (radio.checked) {
                        selectedGender = radio.value;
                        break;
                    }
                }
                const profilePicSrc = profilePicPreview.src;

                // Mettre à jour l'objet userProfile global avec les nouvelles données de l'utilisateur
                userProfile.name = name;
                userProfile.bio = "Nouvel utilisateur Xelar !"; // Bio par défaut pour les nouveaux utilisateurs
                userProfile.profilePic = profilePicSrc;
                userProfile.role = "user"; // Assign default user role

                // Add new user to simulatedUsers for admin page
                simulatedUsers.push({
                    name: userProfile.name,
                    status: "Actif", // Assuming newly registered user is active
                    avatar: userProfile.profilePic
                });

                // Sauvegarder le profil dans le stockage local du navigateur
                localStorage.setItem('xelarUserProfile', JSON.stringify(userProfile));
                localStorage.setItem('simulatedUsers', JSON.stringify(simulatedUsers)); // Save simulated users

                // Mettre à jour tous les éléments de l'interface utilisateur pertinents
                updateUIWithUserProfile();

                console.log("Compte créé (simulé) !");
                console.log("Nom d'utilisateur:", userProfile.name);
                console.log("Mot de passe (non sécurisé):", password);
                console.log("Date de naissance:", dob);
                console.log("Lieu:", location);
                console.log("Numéro de téléphone:", phoneNumber);
                console.log("Genre:", selectedGender);
                console.log("Photo de profil (URL):", userProfile.profilePic);

                // Afficher une alerte de succès et rediriger
                alert(`Félicitations, ${userProfile.name} ! Votre compte Xelar a été créé avec succès.\nVous pouvez maintenant vous connecter.`);

                // Après l'inscription réussie, rediriger vers la page de connexion
                showPage('login');
                history.pushState(null, '', `#login`);

                // Réinitialiser le formulaire d'inscription pour une nouvelle utilisation (facultatif)
                document.getElementById('signup-name').value = '';
                document.getElementById('signup-password').value = '';
                document.getElementById('signup-confirm-password').value = '';
                document.getElementById('signup-dob').value = '';
                document.getElementById('signup-location').value = '';
                signupPhone.value = '';
                signupGenderRadios.forEach(radio => radio.checked = false);
                signupProfilePicInput.value = '';
                profilePicPreview.src = "https://placehold.co/120x120/CCCCCC/FFFFFF?text=Photo";
            });


            // Fonction pour basculer le mode sombre
            const toggleDarkMode = () => {
                body.classList.toggle('dark-mode');
                if (body.classList.contains('dark-mode')) {
                    localStorage.setItem('theme', 'dark');
                    darkModeToggle.textContent = 'Mode Clair';
                    darkModeToggle.classList.remove('bg-gray-700', 'hover:bg-gray-900');
                    darkModeToggle.classList.add('bg-blue-500', 'hover:bg-blue-600');
                } else {
                    localStorage.setItem('theme', 'light');
                    darkModeToggle.textContent = 'Mode Sombre';
                    darkModeToggle.classList.remove('bg-blue-500', 'hover:bg-blue-600');
                    darkModeToggle.classList.add('bg-gray-700', 'hover:bg-gray-900');
                }
            };

            // Appliquer le thème enregistré au chargement
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                body.classList.add('dark-mode');
                darkModeToggle.textContent = 'Mode Clair';
                darkModeToggle.classList.remove('bg-gray-700', 'hover:bg-gray-900');
                darkModeToggle.classList.add('bg-blue-500', 'hover:bg-blue-600');
            } else {
                darkModeToggle.textContent = 'Mode Sombre';
                darkModeToggle.classList.remove('bg-blue-500', 'hover:bg-blue-600');
                darkModeToggle.classList.add('bg-gray-700', 'hover:bg-gray-900');
            }

            // Écouteur d'événement pour le bouton de mode sombre
            darkModeToggle.addEventListener('click', toggleDarkMode);

            // Gérer les interactions des publications (J'aime, Commenter, Partager)
            // Utilisation de la délégation d'événements pour les éléments de publication dynamiques
            postsContainer.addEventListener('click', (event) => {
                const target = event.target;

                // Bouton J'aime
                const likeButton = target.closest('.like-button');
                if (likeButton) {
                    const likesSpan = likeButton.closest('.post-item').querySelector('.likes-count');
                    let currentLikes = parseInt(likesSpan.textContent.split(' ')[0]);
                    if (likeButton.classList.contains('text-blue-600')) {
                        // Annuler le J'aime
                        likeButton.classList.remove('text-blue-600');
                        likesSpan.textContent = `${currentLikes - 1} J'aime`;
                    } else {
                        // J'aime
                        likeButton.classList.add('text-blue-600');
                        likesSpan.textContent = `${currentLikes + 1} J'aime`;
                    }
                    console.log("J'aime cliqué !");
                    return; // Empêcher les autres gestionnaires de se déclencher
                }

                // Bouton bascule des commentaires
                const commentToggleButton = target.closest('.comment-toggle-button');
                if (commentToggleButton) {
                    const commentInputArea = commentToggleButton.closest('.post-item').querySelector('.comment-input-area');
                    commentInputArea.classList.toggle('hidden');
                    console.log("Commenter cliqué !");
                    return;
                }

                // Bouton Poster le commentaire
                const postCommentButton = target.closest('.post-comment-button');
                if (postCommentButton) {
                    const postItem = postCommentButton.closest('.post-item');
                    const commentTextarea = postItem.querySelector('.comment-textarea');
                    const commentsDisplayArea = postItem.querySelector('.comments-display-area');
                    const commentText = commentTextarea.value.trim();

                    if (commentText) {
                        const newCommentDiv = document.createElement('div');
                        newCommentDiv.classList.add('bg-gray-100', 'p-2', 'rounded-lg', 'text-sm');
                        newCommentDiv.innerHTML = `<span class="font-semibold">${userProfile.name}:</span> ${commentText}`;
                        commentsDisplayArea.appendChild(newCommentDiv);
                        commentTextarea.value = ''; // Effacer la zone de texte
                        console.log(`Commentaire posté: "${commentText}" par ${userProfile.name}`);
                    }
                    return;
                }

                // Bouton Partager
                const shareButton = target.closest('.share-button');
                if (shareButton) {
                    shareModal.classList.remove('hidden');
                    console.log("Partager cliqué !");
                    return;
                }
            });


            // Gérer le bouton "Envoyer un message" sur le profil d'ami
            sendMessageFriendProfileButton.addEventListener('click', () => {
                const friendName = friendNameDisplay.textContent; // Récupérer le nom de l'ami affiché
                showPage('chat', { friendName: friendName });
                history.pushState(null, '', `#chat`);
            });

            // Gérer le bouton "Amis" sur le profil d'ami
            viewFriendsButton.addEventListener('click', () => {
                showPage('friends-list');
                history.pushState(null, '', `#friends-list`);
            });

            // Gérer le bouton "Ajouter en ami" sur le profil d'ami
            addFriendButton.addEventListener('click', () => {
                const friendName = friendNameDisplay.textContent;
                console.log(`Demande d'ami envoyée à ${friendName} ! (Action simulée)`);
                alert(`Demande d'ami envoyée à ${friendName} !`); // Utilisation d'une alerte pour un simple retour
            });

            // Gérer les clics sur les éléments de la liste d'amis pour ouvrir le profil d'ami
            document.querySelectorAll('.friend-list-item').forEach(item => {
                item.addEventListener('click', (event) => {
                    event.preventDefault();
                    const friendName = item.dataset.friendName;
                    showPage('friend-profile', { friendName: friendName });
                    history.pushState(null, '', `#friend-profile`);
                });
            });

            // Gérer le bouton "Publier" dans la section "Créer/Publier"
            publishButton.addEventListener('click', () => {
                const postText = newPostTextarea.value.trim();
                const postImageFile = newPostImageInput.files[0];
                let postImageUrl = '';

                if (postImageFile) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        postImageUrl = e.target.result;
                        const newPostHtml = generatePostHtml(userProfile.name, userProfile.profilePic, "À l'instant", postText, postImageUrl);
                        postsContainer.insertAdjacentHTML('afterbegin', newPostHtml); // Ajouter en haut
                        simulatedPosts.unshift({ // Add to simulatedPosts for admin view
                            id: `post-${Date.now()}`,
                            username: userProfile.name,
                            userPic: userProfile.profilePic,
                            timeAgo: "À l'instant",
                            textContent: postText,
                            imageUrl: postImageUrl,
                            likes: 0,
                            comments: 0,
                            shares: 0
                        });
                        newPostTextarea.value = ''; // Effacer la zone de texte
                        newPostImageInput.value = ''; // Effacer l'entrée de fichier
                        console.log("Nouvelle publication avec image ajoutée !");
                    };
                    reader.readAsDataURL(postImageFile);
                } else if (postText) {
                    const newPostHtml = generatePostHtml(userProfile.name, userProfile.profilePic, "À l'instant", postText);
                    postsContainer.insertAdjacentHTML('afterbegin', newPostHtml); // Ajouter en haut
                    simulatedPosts.unshift({ // Add to simulatedPosts for admin view
                        id: `post-${Date.now()}`,
                        username: userProfile.name,
                        userPic: userProfile.profilePic,
                        timeAgo: "À l'instant",
                        textContent: postText,
                        imageUrl: '',
                        likes: 0,
                        comments: 0,
                        shares: 0
                    });
                    newPostTextarea.value = ''; // Effacer la zone de texte
                    console.log("Nouvelle publication texte ajoutée !");
                } else {
                    alert("Veuillez écrire quelque chose ou ajouter une image pour publier.");
                }
            });

            // Fonctionnalité de la modale de partage
            cancelShareButton.addEventListener('click', () => {
                shareModal.classList.add('hidden');
            });

            confirmShareButton.addEventListener('click', () => {
                const selectedFriends = [];
                friendListForShare.querySelectorAll('input[type="checkbox"]:checked').forEach(checkbox => {
                    selectedFriends.push(checkbox.nextElementSibling.textContent);
                });

                if (selectedFriends.length > 0) {
                    console.log(`Publication partagée avec : ${selectedFriends.join(', ')}`);
                    alert(`Publication partagée avec : ${selectedFriends.join(', ')}`);
                } else {
                    console.log("Aucun ami sélectionné pour le partage.");
                    alert("Veuillez sélectionner au moins un ami pour partager.");
                }
                shareModal.classList.add('hidden');
                // Décocher toutes les cases après le partage
                friendListForShare.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = false;
                });
            });

            /*
             * Gestion du partage de fichiers et des ressources locales :
             *
             * Actuellement, cette application permet le téléchargement d'images (via FileReader)
             * pour les publications, ce qui affiche l'image localement dans le navigateur.
             *
             * Le bouton "Partager" sur les publications simule le partage de la publication
             * avec des amis au sein du réseau social (via une modale de sélection).
             *
             * Pour un "partage de fichiers" plus général (documents, vidéos, etc.) ou pour
             * l'intégration de "liens locaux" (`#script#assets/media/ #style`) qui persisteraient
             * ou seraient accessibles par d'autres utilisateurs, une infrastructure backend
             * avec un stockage de fichiers (comme Google Cloud Storage, AWS S3, ou un serveur
             * de fichiers dédié) serait nécessaire.
             *
             * Les navigateurs web ont des restrictions de sécurité strictes (bac à sable)
             * qui empêchent l'accès direct aux chemins de fichiers locaux de l'utilisateur
            * (`file:///C:/path/to/file` ou des liens relatifs à des dossiers non servis par un serveur web)
             * pour des raisons de confidentialité et de sécurité. Les assets comme les scripts et les styles
             * sont chargés via des chemins relatifs au serveur web ou des CDN.
             */

            // --- Admin Page Logic (Simulation) ---

            // Load simulated users and posts from localStorage on startup
            const storedSimulatedUsers = localStorage.getItem('simulatedUsers');
            if (storedSimulatedUsers) {
                simulatedUsers = JSON.parse(storedSimulatedUsers);
            }
            const storedSimulatedPosts = localStorage.getItem('simulatedPosts');
            if (storedSimulatedPosts) {
                simulatedPosts = JSON.parse(storedSimulatedPosts);
            }

            // Admin Login
            adminLoginButton.addEventListener('click', () => {
                const username = adminUsernameInput.value;
                const password = adminPasswordInput.value;

                // Hardcoded credentials for simulation (NOT SECURE IN REAL APP)
                if ((username === 'admin' && password === 'password') || (username === 'kuny137' && password === 'knkn123')) {
                    isAdminLoggedIn = true;
                    adminLoginArea.classList.add('hidden');
                    adminDashboardArea.classList.remove('hidden');
                    adminLoginMessage.classList.add('hidden'); // Hide previous error messages
                    updateAdminDashboard();
                    console.log("Admin connecté !");
                    alert("Connexion administrateur réussie !");
                } else {
                    adminLoginMessage.classList.remove('hidden');
                    console.error("Échec de la connexion admin.");
                }
            });

            // Admin Logout
            adminLogoutButton.addEventListener('click', () => {
                isAdminLoggedIn = false;
                adminLoginArea.classList.remove('hidden');
                adminDashboardArea.classList.add('hidden');
                adminLoginMessage.classList.add('hidden');
                adminUsernameInput.value = '';
                adminPasswordInput.value = '';
                console.log("Admin déconnecté !");
                alert("Déconnexion administrateur.");
            });

            // Function to update the admin dashboard statistics and lists
            const updateAdminDashboard = () => {
                if (isAdminLoggedIn) {
                    totalUsersCount.textContent = simulatedUsers.length;
                    totalPostsCount.textContent = simulatedPosts.length;
                    // Simulate connected users (e.g., random number or just 1 if user is logged in)
                    connectedUsersCount.textContent = Math.floor(Math.random() * 5) + 1; // Random 1-5 connected users

                    // Populate User List
                    adminUserList.innerHTML = '';
                    simulatedUsers.forEach(user => {
                        const userDiv = document.createElement('div');
                        userDiv.classList.add('flex', 'items-center', 'justify-between', 'p-3', 'bg-gray-50', 'rounded-lg', 'shadow-sm');
                        userDiv.innerHTML = `
                            <div class="flex items-center">
                                <img src="${user.avatar}" alt="User Avatar" class="w-10 h-10 rounded-full mr-3">
                                <div>
                                    <p class="font-bold text-gray-900">${user.name}</p>
                                    <p class="text-sm text-gray-600">Statut: ${user.status}</p>
                                </div>
                            </div>
                            <button class="bg-red-500 text-white px-3 py-1 rounded-full text-sm hover:bg-red-600 admin-delete-user" data-username="${user.name}">Supprimer</button>
                        `;
                        adminUserList.appendChild(userDiv);
                    });

                    // Populate Post List
                    adminPostList.innerHTML = '';
                    simulatedPosts.forEach(post => {
                        const postDiv = document.createElement('div');
                        postDiv.classList.add('p-3', 'bg-gray-50', 'rounded-lg', 'shadow-sm');
                        postDiv.innerHTML = `
                            <p class="font-bold text-gray-900 mb-1">Publication par ${post.username}</p>
                            <p class="text-sm text-gray-700 truncate">${post.textContent}</p>
                            <div class="flex justify-between text-xs text-gray-500 mt-2">
                                <span>Likes: ${post.likes}</span>
                                <span>Commentaires: ${post.comments}</span>
                                <button class="bg-red-500 text-white px-2 py-0.5 rounded-full text-xs hover:bg-red-600 admin-delete-post" data-post-id="${post.id}">Supprimer</button>
                            </div>
                        `;
                        adminPostList.appendChild(postDiv);
                    });

                    // Add event listeners for delete buttons (delegation)
                    adminUserList.addEventListener('click', (event) => {
                        const deleteButton = event.target.closest('.admin-delete-user');
                        if (deleteButton) {
                            const usernameToDelete = deleteButton.dataset.username;
                            // Simulate deletion
                            simulatedUsers = simulatedUsers.filter(user => user.name !== usernameToDelete);
                            localStorage.setItem('simulatedUsers', JSON.stringify(simulatedUsers));
                            alert(`Utilisateur ${usernameToDelete} supprimé (simulation).`);
                            updateAdminDashboard(); // Refresh dashboard
                        }
                    });

                    adminPostList.addEventListener('click', (event) => {
                        const deleteButton = event.target.closest('.admin-delete-post');
                        if (deleteButton) {
                            const postIdToDelete = deleteButton.dataset.postId;
                            // Simulate deletion
                            simulatedPosts = simulatedPosts.filter(post => post.id !== postIdToDelete);
                            localStorage.setItem('simulatedPosts', JSON.stringify(simulatedPosts));
                            alert(`Publication ${postIdToDelete} supprimée (simulation).`);
                            updateAdminDashboard(); // Refresh dashboard
                        }
                    });

                } else {
                    adminLoginArea.classList.remove('hidden');
                    adminDashboardArea.classList.add('hidden');
                }
            };


            // Gérer le chargement initial de la page ou les retours/avances du navigateur
            const initialPage = window.location.hash.substring(1) || 'accueil'; // 'accueil' par défaut
            showPage(initialPage);
        });
    </script>
</body>
</html>
